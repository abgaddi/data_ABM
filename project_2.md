# Project Two

## DHS data

In project one, I looked at creating de facto settlements for Laos; however, there were no household surveys available on the DHS program's website. 
So for this project, I requested and used the DHS household survey for Thailand since it borders the south of Laos.
The 1987 survey includes 9045 households with the 43,442 person observations.

These were the following survey variables that were used:

* **qnum**: survey household id
* **nopers**: household number of persons (size)
* **hhwt**: household sample design weight
* **hhsex**: sex
* **hhage**: age
* **hhgra**: highest education level
* **hhmara**: marriage status

Provide a written description of your selected household survey including the number of household and person 
observations as well as the variables in your source data.


## ADM0 level

To create a variable for number of households in Thailand, I used the total population raster divided by the average household size from the DHS survey.
This ended up being about 15.6 million observations, which makes sense since the total population for Thailand is around 70 million.
With this variable, I used rpoint() to create random points based off of the total population raster and used the coordinates of those points for the observations in a sample taken from the DHS household survey.
The sample was generated by using slice_sample() that randomly takes ~15.6 million (number of households) observations from the DHS survey.
The percent error of this sample was 0.0001210817 or 0.012%.
Since there was such a large amount of households, I couldn't get R to expand the demographic attributes of individual persons or spatially locate them.
I was unable to plot all the household points.

## ADM1 level
### Nong Khai

At the amd1 level, I focused on Nong Khai Province since it bordered the area I looked at for project one.
Similar to the adm0, to generate spatially located households, I first started by looking at the number of households in Nong Khai.
The resulting number was 86,855 households.
Again, I took random points based on the population raster for Nong Khai, and a random sample of 86,855 households from the DHS survey where the observations were located only in Nong Khai.
The calcualted percent error was 0.0002475691 or 0.025%, which was slightly higher than at the adm0 level.
Expanding age, gender, education, and marriage status was much more doable at the adm1 level.
However, this survey is quite old so there were missing values sometimes that caused each attribute to have different numbers of individuals.
After joining the demographic attributes, there were 416,172 individual observations and they are plotted below.

![](nk.png)

Looking just at the calculated percent error, the adm1 generated population is less accurate than the adm0 level.
The plot below compares the density and size of households in the DHS data where yellow represents all the households in Thailand and the green line represents the households in Nong Khai.

![](dp1.png)


This plot looks at the density and size of households using a sample for households in all of Thailand and a sample for households in Nong Khai. In comparison, there is less homegeneity in the sampled data which suggests that using the whole data can improve the accuracy rather than just the subsetted sample.

![](dp2.png)




When compared to a randomly generated synthetic population that describes the demographic attributes of households 
and persons, does yours more closely approximate reality? How is yours an improvement over a synthetic population 
that was generated in accordance with complete spatial randomness? 




Generate plots and incorporate results from your
 work as evidence in support of an argument that the synthetic population you generated is a good approximation of the 
 reality that existed in your selected location at that given time.


heat map





## Predicting

I was able to train, split and create a multinomial regression model using household size, gender, age, and marriage status for predicting education within a household.
The model produced an accuracy of 61.88%. In terms of modelling and predicting, a random forrest might have been a better I was not able to create a random forrest regression model since I did not 
forrest regression


the graph below compares the density and size of thailand households  from the sruvey versus in nong khai

this graph displays less homogeneity, which is typical when sampling from a population with outliers. Even still, the population from Basse displays the same skew